{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.module.css","components/Container/Container.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","services/settings.js","services/pixabay-api.js","App.js","index.js"],"names":["module","exports","Container","children","className","style","container","defaultProps","Searchbar","onSubmit","useState","query","setQuery","searchbar","search_form","e","preventDefault","type","search_form_button","search_form_button_label","search_form_input","value","onChange","currentTarget","autocomplete","autofocus","placeholder","ImageGalleryItem","id","user","largeImageURL","webformatURL","onClick","image_gallery_item","src","alt","image_gallery_item_image","toString","ImageGallery","images","showLargeImage","image_gallery","map","Loader","styles","div_loader","color","height","width","Button","onLoadMore","div_button","button","modalRoot","document","querySelector","Modal","onClose","isShowModal","setIsShowModal","useEffect","console","log","window","addEventListener","handleKeyDown","removeEventListener","event","code","createPortal","overlay","target","modal","data","API_KEY","PER_PAGE","instance","axios","create","defaults","baseURL","searchQuery","currentPage","get","timeout","then","response","App","setImages","setSearchQuery","setCurrentPage","setLargeImageURL","isLoading","setIsLoading","totalImages","setTotalImages","showModal","setShowModal","isLoadMore","setIsLoadMore","error","setError","fetchImages","options","pixabayApi","imagesQuery","hits","total","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","diffCurrentLoadImages","length","isShowLoadMore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.513a9e68.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery_item\":\"ImageGalleryItem_image_gallery_item__3hfm5\",\"image_gallery_item_image\":\"ImageGalleryItem_image_gallery_item_image__2Xg13\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"div_button\":\"Button_div_button__Xrbaf\",\"button\":\"Button_button__3QF_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3RIox\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image_gallery\":\"ImageGallery_image_gallery__3lXlD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"div_loader\":\"Loader_div_loader__2XBYZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__jo466\",\"search_form\":\"Searchbar_search_form__20B-z\",\"search_form_button\":\"Searchbar_search_form_button__2jdmA\",\"search_form_button_label\":\"Searchbar_search_form_button_label__3F8a4\",\"search_form_input\":\"Searchbar_search_form_input__3rbmt\"};","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport style from \"./Container.module.css\";\n\nconst Container = ({ children }) => (\n  <div className={style.container}>{children}</div>\n);\n\nContainer.defaultProps = {\n  children: \"<></>\",\n};\n\nContainer.propTypes = {\n  children: PropTypes.element,\n};\n\nexport default Container;\n","import React, { useState } from \"react\";\n\nimport style from \"./Searchbar.module.css\";\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState(\"\");\n\n  const handleChange = (e) => {\n    setQuery(e.currentTarget.value);\n    // this.setState({ query: e.currentTarget.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    onSubmit(query);\n    setQuery(\"\");\n    // this.setState({ query: \"\" });\n  };\n\n  return (\n    <header className={style.searchbar}>\n      <form className={style.search_form} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={style.search_form_button}>\n          <span className={style.search_form_button_label}>Search</span>\n        </button>\n\n        <input\n          className={style.search_form_input}\n          type=\"text\"\n          value={query}\n          onChange={handleChange}\n          autocomplete=\"off\"\n          autofocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport style from \"./ImageGalleryItem.module.css\";\n\nconst ImageGalleryItem = ({\n  id,\n  user,\n  largeImageURL,\n  webformatURL,\n  onClick,\n}) => {\n  // console.log(\"onlickImage ~ onClick: \", onClick);\n\n  const onClickImage = (e) => {\n    // console.log(\"onlickImage ~ e: \", largeImageURL);\n    onClick({ largeImageURL });\n  };\n\n  return (\n    <li key={id.toString()} className={style.image_gallery_item}>\n      <img\n        src={webformatURL}\n        alt={user}\n        className={style.image_gallery_item_image}\n        onClick={onClickImage}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.defaultProps = {\n  user: \"Author\",\n  largeImageURL: \"\",\n  webformatURL: \"\",\n};\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number.isRequired,\n  user: PropTypes.string,\n  largeImageURL: PropTypes.string,\n  webformatURL: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport ImageGalleryItem from \"../ImageGalleryItem\";\nimport style from \"./ImageGallery.module.css\";\n\nconst ImageGallery = ({ images, showLargeImage }) => {\n  return (\n    <ul className={style.image_gallery}>\n      {images.map(({ id, user, largeImageURL, webformatURL }) => (\n        <ImageGalleryItem\n          id={id}\n          user={user}\n          largeImageURL={largeImageURL}\n          webformatURL={webformatURL}\n          onClick={showLargeImage}\n        />\n      ))}\n    </ul>\n  );\n};\n\nImageGallery.defaultProps = {\n  images: [],\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.array,\n  showLargeImage: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import React, { Component } from \"react\";\nimport LoaderItem from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport styles from \"./Loader.module.css\";\n\nexport default function Loader() {\n  return (\n    <div className={styles.div_loader}>\n      <LoaderItem type=\"Oval\" color=\"#00BFFF\" height={60} width={60} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./Button.module.css\";\n\nconst Button = ({ onLoadMore }) => {\n  return (\n    <div className={styles.div_button}>\n      <button className={styles.button} onClick={onLoadMore}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nButton.propTypes = {\n  onLoadMore: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { createPortal } from \"react-dom\";\nimport styles from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nconst Modal = ({ largeImageURL, onClose }) => {\n  const [isShowModal, setIsShowModal] = useState(true);\n\n  useEffect(() => {\n    console.log(\"Modal useEffect\");\n\n    if (isShowModal) {\n      window.addEventListener(\"keydown\", handleKeyDown);\n    } else {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    }\n  }, [isShowModal]);\n\n  const handleBackdropClick = (event) => {\n    console.log(\"currentTarget: \", event.currentTarget);\n    console.log(\"target: \", event.target);\n\n    if (event.currentTarget === event.target) {\n      onClose();\n      setIsShowModal(false);\n    }\n  };\n\n  const handleKeyDown = (event) => {\n    if (event.code === \"Escape\") {\n      console.log(\"Enter ESC, Modal close\");\n\n      onClose();\n      setIsShowModal(false);\n    }\n  };\n\n  return createPortal(\n    <div className={styles.overlay} onClick={handleBackdropClick}>\n      <div className={styles.modal}>\n        <img src={largeImageURL} alt=\"\" />\n      </div>\n    </div>,\n    modalRoot\n  );\n};\n\nModal.defaultProps = {\n  largeImageURL: \"\",\n};\n\nModal.propTypes = {\n  largeImageURL: PropTypes.string,\n};\n\nexport default Modal;\n","import React from \"react\";\n\nconst data = { API_KEY: \"21791373-989f8b5e7418bf068b731f5c9\", PER_PAGE: 12 };\n\nexport default data;\n","import axios from \"axios\";\nimport data from \"./settings\";\n\nconst instance = axios.create();\ninstance.defaults.baseURL = \"https://pixabay.com/api/\";\n// instance.defaults.timeout = 2000;\n\n// https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n\nconst fetchImages = ({ searchQuery = \"\", currentPage = 1 }) => {\n  const query = `?q=${searchQuery}&page=${currentPage}&key=${data.API_KEY}&image_type=photo&orientation=horizontal&per_page=${data.PER_PAGE}`;\n\n  // console.log(\"fetchImages ~ searchQuery: \", searchQuery);\n  // console.log(\"fetchImages ~ currentPage: \", currentPage);\n\n  const userRequest = instance\n    .get(`${query}`, {\n      timeout: 10000,\n    })\n    .then((response) => response.data);\n  return userRequest;\n};\n\nexport default { fetchImages };\n","import React, { Component, useState, useEffect } from \"react\";\n\nimport Container from \"./components/Container\";\nimport Searchbar from \"./components/Searchbar\";\nimport ImageGallery from \"./components/ImageGallery\";\nimport Loader from \"./components/Loader\";\nimport Button from \"./components/Button\";\nimport Modal from \"./components/Modal\";\n\nimport pixabayApi from \"./services/pixabay-api\";\n\nexport default function App() {\n  const [images, setImages] = useState([]);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [largeImageURL, setLargeImageURL] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [totalImages, setTotalImages] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [isLoadMore, setIsLoadMore] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    console.log(\"useEffect ~ useEffect: \", searchQuery);\n\n    if (!searchQuery) {\n      return;\n    }\n\n    fetchImages();\n  }, [searchQuery]);\n\n  const fetchImages = () => {\n    const options = { searchQuery, currentPage };\n    console.log(\"App ~ options: \", options);\n\n    setIsLoading(true);\n\n    pixabayApi\n      .fetchImages(options)\n      .then((data) => {\n        // console.log(\"APP pixabayApi ~ data: \", data);\n\n        const imagesQuery = data.hits;\n        const totalImages = data.total;\n\n        setImages([...images, ...imagesQuery]);\n        setTotalImages(totalImages);\n        setCurrentPage(currentPage + 1);\n        setError(\"\");\n\n        if (isLoadMore) {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: \"smooth\",\n          });\n        }\n      })\n      .catch((error) => setError(error))\n      .finally(() => setIsLoading(false));\n  };\n\n  const onChangeQuery = (query) => {\n    console.log(\"App ~ query: \", query);\n\n    setSearchQuery(query);\n    setCurrentPage(1);\n    setIsLoadMore(false);\n    setImages([]);\n    setError(null);\n  };\n\n  const onLoadMore = () => {\n    setIsLoadMore(true);\n    fetchImages();\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const showLargeImage = ({ largeImageURL }) => {\n    console.log(\"App ~ url\", largeImageURL);\n\n    setLargeImageURL(largeImageURL);\n    setShowModal(!showModal);\n  };\n\n  const diffCurrentLoadImages = totalImages - images.length;\n  const isShowLoadMore =\n    images.length > 0 && diffCurrentLoadImages > 0 && !isLoading;\n\n  return (\n    <Container>\n      <Searchbar onSubmit={onChangeQuery} />\n      {error && <p>{error}</p>}\n      {images.length > 0 && (\n        <ImageGallery showLargeImage={showLargeImage} images={images} />\n      )}\n\n      {isLoading && <Loader />}\n\n      {isShowLoadMore && <Button onLoadMore={onLoadMore} />}\n\n      {/* <Modal onClose={toggleModal}>\n                    <p>MODAL</p>\n                </Modal> */}\n\n      {showModal && (\n        <Modal largeImageURL={largeImageURL} onClose={toggleModal}></Modal>\n      )}\n    </Container>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"modern-normalize/modern-normalize.css\";\n\nimport App from \"./App\";\nimport \"./styles.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}