(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,a,t){e.exports={image_gallery_item:"ImageGalleryItem_image_gallery_item__3hfm5",image_gallery_item_image:"ImageGalleryItem_image_gallery_item_image__2Xg13"}},13:function(e,a,t){e.exports={div_button:"Button_div_button__Xrbaf",button:"Button_button__3QF_k"}},14:function(e,a,t){e.exports={overlay:"Modal_overlay__2GjdW",modal:"Modal_modal__P3_V5"}},24:function(e,a,t){e.exports={container:"Container_container__3RIox"}},25:function(e,a,t){e.exports={image_gallery:"ImageGallery_image_gallery__3lXlD"}},26:function(e,a,t){e.exports={div_loader:"Loader_div_loader__2XBYZ"}},73:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var r=t(1),o=t.n(r),n=t(9),c=t.n(n),s=(t(32),t(15)),l=t(4),i=t(5),u=t(7),g=t(6),m=t(11),h=t.n(m),d=t(24),_=t.n(d),b=t(0),f=function(e){var a=e.children;return Object(b.jsx)("div",{className:_.a.container,children:a})};f.defaultProps={children:"<></>"};var p=f,j=t(8),y=t.n(j),v=function(e){Object(u.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=a.call.apply(a,[this].concat(o))).state={query:""},e.handleChange=function(a){e.setState({query:a.currentTarget.value})},e.handleSubmit=function(a){a.preventDefault(),e.props.onSubmit(e.state.query),e.setState({query:""})},e}return Object(i.a)(t,[{key:"render",value:function(){return Object(b.jsx)("header",{className:y.a.searchbar,children:Object(b.jsxs)("form",{className:y.a.search_form,onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:y.a.search_form_button,children:Object(b.jsx)("span",{className:y.a.search_form_button_label,children:"Search"})}),Object(b.jsx)("input",{className:y.a.search_form_input,type:"text",value:this.state.query,onChange:this.handleChange,autocomplete:"off",autofocus:!0,placeholder:"Search images and photos"})]})})}}]),t}(r.Component),O=t(2),L=t.n(O),x=t(12),w=t.n(x),I=function(e){var a=e.id,t=e.user,r=e.largeImageURL,o=e.webformatURL,n=e.onClick;console.log("onlickImage ~ onClick: ",n);return Object(b.jsx)("li",{className:w.a.image_gallery_item,children:Object(b.jsx)("img",{src:o,alt:t,className:w.a.image_gallery_item_image,onClick:function(e){console.log("onlickImage ~ e: ",r),n({largeImageURL:r})}})},a)};I.defaultProps={user:"Author",largeImageURL:"",webformatURL:""};var k=I,S=t(25),M=t.n(S),C=function(e){var a=e.images,t=e.showLargeImage;return Object(b.jsx)("ul",{className:M.a.image_gallery,children:a.map((function(e){var a=e.id,r=e.user,o=e.largeImageURL,n=e.webformatURL;return Object(b.jsx)(k,{id:a,user:r,largeImageURL:o,webformatURL:n,onClick:t})}))})};C.defaultProps={images:L.a.shape({largeImageURL:"",webformatURL:""})};var R=C,U=(t(54),t(26)),P=t.n(U),N=function(e){Object(u.a)(t,e);var a=Object(g.a)(t);function t(){return Object(l.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return Object(b.jsx)("div",{className:P.a.div_loader,children:Object(b.jsx)(h.a,{type:"Oval",color:"#00BFFF",height:60,width:60})})}}]),t}(r.Component),A=t(13),E=t.n(A),Q=function(e){var a=e.onLoadMore;return Object(b.jsx)("div",{className:E.a.div_button,children:Object(b.jsx)("button",{className:E.a.button,onClick:a,children:"Load more"})})},q=t(14),B=t.n(q),D=document.querySelector("#modal-root"),G=function(e){Object(u.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=a.call.apply(a,[this].concat(o))).handleKeyDown=function(a){"Escape"===a.code&&(console.log("Enter ESC, Modal close"),e.props.onClose())},e.handleBackdropClick=function(a){console.log("currentTarget: ",a.currentTarget),console.log("target: ",a.target),a.currentTarget===a.target&&e.props.onClose()},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("Modal componentDidMount"),window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){console.log("Modal componentWillUnmount"),window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(n.createPortal)(Object(b.jsx)("div",{className:B.a.overlay,onClick:this.handleBackdropClick,children:Object(b.jsx)("div",{className:B.a.modal,children:Object(b.jsx)("img",{src:this.props.largeImageURL,alt:""})})}),D)}}]),t}(r.Component);G.defaultProps={largeImageURL:""};var F=t(27),K={API_KEY:"21791373-989f8b5e7418bf068b731f5c9",PER_PAGE:12},T=t.n(F).a.create();T.defaults.baseURL="https://pixabay.com/api/";var X=function(e){var a=e.searchQuery,t=void 0===a?"":a,r=e.currentPage,o=void 0===r?1:r,n="?q=".concat(t,"&page=").concat(o,"&key=").concat(K.API_KEY,"&image_type=photo&orientation=horizontal&per_page=").concat(K.PER_PAGE);return T.get("".concat(n),{timeout:1e4}).then((function(e){return e.data}))},W=function(e){Object(u.a)(t,e);var a=Object(g.a)(t);function t(){var e;Object(l.a)(this,t);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=a.call.apply(a,[this].concat(o))).state={images:[],searchQuery:"",currentPage:1,largeImageURL:"",isLoading:!1,totalImages:0,showModal:!1,isLoadMore:!1,error:null},e.fetchImages=function(){var a=e.state,t=a.currentPage,r={searchQuery:a.searchQuery,currentPage:t};e.setState({isLoading:!0}),X(r).then((function(a){console.log("APP pixabayApi ~ data: ",a);var t=a.hits,r=a.total;e.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(t)),totalImages:r,currentPage:e.currentPage+1}})),e.setState({error:""}),e.state.isLoadMore&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(a){return e.setState({error:a})})).finally((function(){return e.setState({isLoading:!1})}))},e.onChangeQuery=function(a){console.log("App ~ query: ",a),e.setState({searchQuery:a,currentPage:1,isLoadMore:!1,images:[],error:null})},e.onLoadMore=function(){e.setState({isLoadMore:!0}),e.fetchImages()},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.showLargeImage=function(a){var t=a.largeImageURL;console.log("App ~ url",t),e.setState({largeImageURL:t,showModal:!e.state.showModal})},e}return Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,a){a.searchQuery!==this.state.searchQuery&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,a=e.images,t=e.isLoading,r=e.totalImages,o=e.showModal,n=e.largeImageURL,c=e.error,s=r-a.length,l=a.length>0&&s>0&&!t;return Object(b.jsxs)(p,{children:[Object(b.jsx)(v,{onSubmit:this.onChangeQuery}),c&&Object(b.jsx)("p",{children:c}),a.length>0&&Object(b.jsx)(R,{showLargeImage:this.showLargeImage,images:a}),t&&Object(b.jsx)(N,{}),l&&Object(b.jsx)(Q,{onLoadMore:this.onLoadMore}),o&&Object(b.jsx)(G,{largeImageURL:n,onClose:this.toggleModal})]})}}]),t}(r.Component);t(73);c.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(W,{})}),document.getElementById("root"))},8:function(e,a,t){e.exports={searchbar:"Searchbar_searchbar__jo466",search_form:"Searchbar_search_form__20B-z",search_form_button:"Searchbar_search_form_button__2jdmA",search_form_button_label:"Searchbar_search_form_button_label__3F8a4",search_form_input:"Searchbar_search_form_input__3rbmt"}}},[[74,1,2]]]);
//# sourceMappingURL=main.835ce13f.chunk.js.map